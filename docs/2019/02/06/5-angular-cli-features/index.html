    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		
		<meta name="generator" content="Hugo 0.51" />
		<title>5 Angular CLI Features You Didn&#39;t Know About &middot; Minko Gechev&#39;s blog</title>
		<link rel="shortcut icon" href="https://blog.mgechev.com/images/favicon.ico">
		<link rel="stylesheet" href="https://blog.mgechev.com/css/highlight.css">
		<link rel="stylesheet" href="https://blog.mgechev.com/css/style.css">
		

		
		<link rel="stylesheet" href="https://blog.mgechev.com/css/font-awesome.min.css">
		

		
		<link href="https://blog.mgechev.com/feed.xml" rel="alternate" type="application/rss+xml" title="Minko Gechev&#39;s blog">
		
		
		<link rel="amphtml" href="https://blog.mgechev.com/amp/2019/02/06/5-angular-cli-features/">
		

		<meta property="og:title" content="5 Angular CLI Features You Didn&#39;t Know About" />
		<meta property="og:description" content="I&rsquo;ve been using Angular for years, not only the framework itself but the entire development platform, including the CLI. Since I joined the Angular team and started digging into the source code, however, I started noticing features in the CLI that I&rsquo;ve never used before. In this blog post I want to share some of them, which will make your work life easier and more productive!
Conditional Polyfill Serving In the development of Angular we&rsquo;re using TypeScript with a lot of modern JavaScript features." />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://blog.mgechev.com/2019/02/06/5-angular-cli-features/" />
		
		<meta property="og:image" content="https://blog.mgechev.com/images/5-cli-features/cli.png"/>
		<meta property="og:image:secure_url" content="https://blog.mgechev.com/images/5-cli-features/cli.png"/>
		
	</head>

    <body>
       <nav class="main-nav">
  
  <div class="link-wrapper">
	
	
		<a href='https://blog.mgechev.com/'> <span class="arrow">‚Üê</span>Home</a>
	
	<a href='https://blog.mgechev.com/post'>Posts</a>
	<a href='https://blog.mgechev.com/about'>About</a>
	<a href='https://blog.mgechev.com/talks'>Speaking</a>
  </div>

	

	
  
	
</nav>
<a href="https://github.com/mgechev" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="z-index: 100000; fill:#70B7FD; color:#fff; position: fixed; top: 20px; border: 0; left: 20px; transform: scale(-1.5, 1.5);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>


        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>
                        5 Angular CLI Features You Didn&#39;t Know About
                    </h1>
                    <h2 class="headline">
                    <a href="https://github.com/mgechev/blog.mgechev.com/tree/master/content/post/2019-02-06-5-angular-cli-features.md">
                        <i class="fa fa-pencil-square-o"></i> Edit
                    </a>
                    ¬∑ Feb 6, 2019
                    ¬∑ 5 minutes read
                    ¬∑ <a href="https://twitter.com/mgechev?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="true">Follow @mgechev</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                      <span class="tags">
                      
                      
                          
                              <a href="https://blog.mgechev.com/tags/angular">Angular</a>
                          
                              <a href="https://blog.mgechev.com/tags/angular-cli">Angular CLI</a>
                          
                              <a href="https://blog.mgechev.com/tags/productivity">Productivity</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                <section id="post-body">
                    

<p>I&rsquo;ve been using Angular for years, not only the framework itself but the entire development platform, including the CLI. Since I joined the Angular team and started digging into the source code, however, I started noticing features in the CLI that I&rsquo;ve never used before. In this blog post I want to share some of them, which will make your work life easier and more productive!</p>

<p><img src="/images/5-cli-features/cli.png" style="display: block; margin: auto;"></p>

<h2 id="conditional-polyfill-serving">Conditional Polyfill Serving</h2>

<p>In the development of Angular we&rsquo;re using TypeScript with a lot of modern JavaScript features. Not all of them are supported by the users&rsquo; browsers so that&rsquo;s why as part of the production build we ship a file called <code>polyfills.js</code>, which provides features such as <code>Map</code>, <code>Set</code>, zones.js, etc.</p>

<p>Over the past a couple of years, browser vendors started implementing a lot of these APIs. The chances are that a user who&rsquo;s on the latest version of Chrome, for instance, will not need any of the ES2015 polyfills that we ship as part of <code>polyfills.js</code>. Instead, their browser will support them natively. This makes large portion of the content of <code>polyfills.js</code> obsolete and unnecessary.</p>

<p>That&rsquo;s why, <strong>as part of Angular CLI 7.3.0</strong>, we introduced conditional polyfill loading! As part of the default build process, Angular CLI will produce two bundles <code>polyfills.js</code> and <code>es2015-polyfills.js</code>. <code>polyfills.js</code> includes only the polyfills required by the browsers which have all the ES2015 features implemented natively. In contrast, <code>es2015-polyfills.js</code> contains all the polyfills from <code>polyfills.js</code> + ES2015 ones (such as <code>Map</code>, <code>Set</code>, etc). Users who&rsquo;re using newer browsers will only download <code>polyfills.js</code> which will load, parse, and execute faster.</p>

<p>You might be wondering: all my users are with modern browsers, why would I have to wait for the CLI to produce <code>es2015-polyfills.js</code> that will never be in use? If you&rsquo;re really thinking this, then you&rsquo;re a happy developer. If you want to ignore ES2015 polyfills completely, then build your application running:</p>
<div class="highlight"><pre class="chroma">ng build --es5BrowserSupport=false</pre></div>
<p>By setting the <code>--es5BrowserSupport</code> flag to <code>false</code>, Angular CLI will produce only <code>polyfills.js</code> which contains the polyfills required by ES2015 enabled browsers.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Bar<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">base</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/&#34;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;icon&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;image/x-icon&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;favicon.ico&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;styles.3ff695c00d717f2d2a11.css&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">app-root</span><span class="p">&gt;&lt;/</span><span class="nt">app-root</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;runtime.a5dd35324ddfd942bef1.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;es2015-polyfills.22a880c57ce4cc126b27.js&#34;</span> <span class="na">nomodule</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;polyfills.407a467dedb63cfdd103.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;main.9a92bcc7ef41b7baa863.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<p>On the snippet above, you can see how Angular CLI downloads the polyfills conditionally using the <code>nomodule</code> attribute.</p>

<h2 id="hidden-source-maps">Hidden Source Maps</h2>

<p>Source maps are an amazing tool which helps us with debugging transformed code in its original form. For example, although the browser executes JavaScript, we can debug the original TypeScript that we&rsquo;ve written. It&rsquo;s likely, however, that we would not want to ship source maps to our production servers. There are a couple of reasons for this:</p>

<ul>
<li>Source maps are usually large; they could be several hundreds of KBs even after compression</li>
<li>We may not want to share the original source code of our application with the users</li>
</ul>

<p>Angular CLI has a solution for this! In development all the source files have associated source maps. In production, however, you can chose between not generating source maps at all, generating external, or &ldquo;hidden&rdquo; source maps. There&rsquo;s nothing that hidden or special in the latter kind - we generate the source maps but do not reference them in the JavaScript files.</p>

<p>Why is this useful? If you&rsquo;re using an error reporting service such as Sentry, you can upload the produced source maps so you can get runtime errors mapped to their original position in the code that you&rsquo;ve written. You can read more about how to upload source maps to Sentry <a href="https://docs.sentry.io/platforms/javascript/sourcemaps/availability/#uploading-source-maps-to-sentry">here</a>.</p>

<h3 id="how-to-enable-hidden-source-maps">How to enable hidden source maps?</h3>

<p>Open <code>angular.json</code> and set the <code>sourceMap</code> property under the production builder:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="err">...</span>
<span class="s2">&#34;configurations&#34;</span><span class="err">:</span> <span class="p">{</span>
  <span class="nt">&#34;production&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;sourceMap&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&#34;hidden&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="err">...</span></code></pre></div>
<p>The source map property is under <code>projects.[PROJECT_NAME].architect.build.configurations.production.sourceMap</code>.</p>

<p><img src="/images/5-cli-features/hidden-sourcemaps.gif" style="display: block; margin: auto; width: 668px;"></p>

<p>To take advantage of this feature, make sure you&rsquo;re using <strong>Angular CLI ^7.2.0</strong>.</p>

<h2 id="looking-up-the-documentation">Looking up the Documentation</h2>

<p>While working on a project, I spend most of my time in the terminal. Often I want to look up something in the Angular&rsquo;s documentation quickly from the command line. Angular CLI provides <code>ng doc</code> which accepts a keyword. The <code>doc</code> command will open <a href="https://angular.io">https://angular.io</a> in the browser and automatically search for the provided keyword.</p>

<p>Here&rsquo;s how this works in practice:</p>

<p><img src="/images/5-cli-features/doc.gif" style="display: block; margin: auto; width: 668px;"></p>

<p><strong><em>At the moment of writing, there&rsquo;s a <a href="https://github.com/angular/angular-cli/issues/13575">known issue</a> on Windows</em></strong></p>

<h2 id="profiling-the-build">Profiling the Build</h2>

<p>The more the application grows, the slower the build gets. <strong>Angular CLI version 7.0.0</strong> introduced a <code>--profile</code> flag that outputs the build events and lets you profile them in <code>chrome://tracing</code>. You can use this feature as follows:</p>

<ol>
<li>Build your project with <code>--profile</code> flag on (<code>ng build --prod --profile</code>), Angular CLI will produce a file called <code>chrome-profiler-events.json</code></li>
<li>Open <a href="chrome://tracing"><code>chrome://tracing</code></a> and click on &ldquo;Load&rdquo; in the top left corner</li>
<li>Select <code>chrome-profiler-events.json</code></li>
<li>üéâ</li>
</ol>

<p>Here&rsquo;s a <a href="https://www.chromium.org/developers/how-tos/trace-event-profiling-tool">link</a> which explains how to get started with the trace event profiling tool.</p>

<p><img src="/images/5-cli-features/tracing.png" style="display: block; margin: auto; width: 668px;"></p>

<h2 id="open-the-browser">Open the Browser</h2>

<p>This is an obvious one, but I&rsquo;ve been really missing it since few days ago when I saw that it has been in the CLI the entire time&hellip; In <a href="https://github.com/mgechev/angular-seed">Angular Seed</a>, I was feeling strongly for opening the browser once the development server is ready. I used Angular CLI in the past and I noticed that this wasn&rsquo;t the case there, which I found a little disappointing.</p>

<p>Oh well, I didn&rsquo;t look at the documentation back then&hellip;but while reading through the source code I found the <code>--open=true</code> or <code>-o</code> command line option, which opens the browser for you. This tiny little feature saves me over a minute every day.</p>
<div class="highlight"><pre class="chroma">ng serve -o</pre></div>
<h1 id="conclusion">Conclusion</h1>

<p>In this blog post we looked at five not very popular CLI features:</p>

<ul>
<li>Conditional polyfill serving</li>
<li>Hidden source maps, consumable by error reporting services</li>
<li>Searching in the Angular&rsquo;s documentation using <code>ng doc</code></li>
<li>Profiling the build with Chrome&rsquo;s trace event profiling tool</li>
<li>Opening the browser when the development server starts</li>
</ul>

<p>Be tunned for Angular CLI v8.0.0 with more upcoming feature. Make sure you follow <a href="https://blog.angular.io">https://blog.angular.io</a> for updates!</p>

                </section>
            </article>

            

            
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mgechev';

     
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            

            

            <footer id="footer">
    <div class="by-author">with <i class="fa fa-heart" aria-hidden="true"></i> by Minko Gechev</div>
    <p class="small">
         ¬© Copyright 2019  
    </p>
</footer>
        </section>

        <script src="https://blog.mgechev.com/js/main.js"></script>




  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-18060688-3', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script async src="//twemoji.maxcdn.com/2/twemoji.min.js?2.3.0"></script>
<script>
  window.addEventListener('load', function () {
    twemoji.parse(document.body, { size: 72 });
  });
</script>



    </body>
</html>
